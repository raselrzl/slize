generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String  @id @unique
  email        String
  firstName    String
  lastName     String
  profileImage String

  orders Order[]

  createdAt DateTime @default(now())
}

model Product {
  id          String        @id @default(uuid())
  name        String
  description String
  status      ProductStatus  
  images      String[]
  category    Category
  isFeatured  Boolean       @default(false)
  available   Int           @default(0)

  price       Int
  discount    Int?
  inputPrice    Int?

  createdAt DateTime @default(now())

  orderItems OrderItem[]
}

model Banner {
  id          String @id @default(uuid())
  title       String
  imageString String

  createdAt DateTime @default(now())
}

model Order {
  id             String           @id @default(uuid())
  status         String           @default("pending")  // existing
  orderStatus    OrderStatus?     // new optional
  deliveryStatus DeliveryStatus?  // new optional
  invoiceStatus  InvoiceStatus?   // optional invoice payment tracking
  amount         Int
  deliveryFee    Int?

  User   User?   @relation(fields: [userId], references: [id])
  userId String?

  items  OrderItem[]  // relation to OrderItem

  createdAt DateTime @default(now())

  fullName        String?
  phone           String?
  email           String?

  shippingName    String?
  shippingLine1   String?
  shippingLine2   String?
  shippingCity    String?
  shippingPostal  String?
  shippingCountry String?
  paymentMethod  PaymentMethod?
}

enum PaymentMethod {
  direct
  invoice
}


model OrderItem {
  id        String   @id @default(uuid())
  orderId   String?
  productId String?
  quantity  Int      @default(1)

  name       String?
  price      Int?
  imageString String?

  Order   Order?    @relation(fields: [orderId], references: [id])
  Product Product?  @relation(fields: [productId], references: [id])
}

// New enums
enum OrderStatus {
  pending
  accepted
  cancelled
}

enum DeliveryStatus {
  not_shipped
  shipped
  delivered
}

enum InvoiceStatus {
  pending
  paid
}

enum ProductStatus {
  draft
  published
  archived
}

enum Category {
  men
  women
  kids
  baby
  toddlergirls
  toddlerboys
  kidgirlsfourtofive
  kidboysfourtofive
}
